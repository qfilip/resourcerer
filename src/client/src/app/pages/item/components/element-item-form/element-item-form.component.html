<form [formGroup]="form" (submit)="onSubmit($event)">
    <label>
        <div class="input">
            <span>Name:</span>
            <input formControlName="name" />
        </div>
        @if(form.controls.name.errors && form.controls.name.dirty) {
            <div class="error">Name must have at least 2 characters</div>
        }
    </label>

    <label>
        <div class="input">
            <span>Production Price:</span>
            <input formControlName="productionPrice" />
        </div>
        @if(form.controls.productionPrice.errors && form.controls.productionPrice.dirty) {
            <div class="error">Production price cannot be negative</div>
        }
    </label>

    <label>
        <div class="input">
            <span>Production Time (seconds):</span>
            <input formControlName="productionTimeSeconds" />
        </div>
        @if(form.controls.productionTimeSeconds.errors && form.controls.productionTimeSeconds.dirty) {
            <div class="error">Production time cannot be negative</div>
        }
    </label>

    <label>
        <div class="input">
            <span>Can expire:</span>
            <input type="checkbox" formControlName="canExpire" />
        </div>
    </label>

    <label [class.disabled] = "!form.controls.canExpire.value">
        <div class="input">
            <span>Expiration Time (seconds):</span>
            <input formControlName="expirationTimeSeconds" [readOnly]="!form.controls.canExpire" />
        </div>
        @if(form.controls.expirationTimeSeconds.errors && form.controls.expirationTimeSeconds.dirty) {
            <div class="error">Expiration time cannot be negative</div>
        }
    </label>

    <label>
        <div class="input">
            <span>Unit Price:</span>
            <input formControlName="unitPrice" />
        </div>
        @if(form.controls.unitPrice.errors && form.controls.unitPrice.dirty) {
            <div class="error">
                Unit price cannot be negative
            </div>
        }
    </label>

    <label>
        <div class="input">
            <span>Category:</span>
            <select formControlName="categoryId">
                @for(x of formData.categories; track $index) {
                    <option [ngValue]="x.id">{{ x.name }}</option>
                }
            </select>
        </div>
        @if(form.controls.categoryId.errors && form.controls.categoryId.dirty) {
            <div class="error">
                Category is required
            </div>
        }
    </label>

    <label>
        <div class="input">
            <span>Unit of Measure:</span>
            <select formControlName="unitOfMeasure">
                @for(x of formData.unitsOfMeasure; track $index) {
                    <option [ngValue]="x.id">{{ x.name }}</option>
                }
            </select>
        </div>
        @if(form.controls.unitOfMeasureId.errors && form.controls.unitOfMeasureId.dirty) {
            <div class="error">
                Unit of Measure is required
            </div>
        }
    </label>

    @switch (formType) {
        @case ("create") {
            <button (click)="onSubmit($event)">Create</button>
        } @case ("edit") {
            <button (click)="onSubmit($event)">Edit</button>
        }
    }
</form>
